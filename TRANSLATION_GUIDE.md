# 📖 CCA 课程翻译使用指南

## 🎯 问题说明

当您在翻译管理系统中更新了翻译，但 CCA 规划页面仍然显示中文，这是因为：

1. **翻译数据存储在文件中**：CCA 课程数据存储在 `scripts/cca-data.js` 文件
2. **需要手动替换文件**：翻译系统生成的新文件需要手动替换原文件
3. **浏览器缓存**：可能需要清除缓存才能看到更新

## ✅ 完整操作流程

### 步骤 1：打开翻译管理系统

1. 打开首页 `index.html`
2. 滚动到页面底部，点击页脚右下角的小圆点 `·`
3. 进入管理后台
4. 点击"翻译管理系统"卡片

### 步骤 2：编辑翻译

**方法 A：手动编辑**
- 在表格中找到需要翻译的课程
- 点击"英文名称"列的输入框
- 输入英文翻译
- 按 Enter 或点击其他地方保存

**方法 B：自动翻译（推荐）**
- 点击页面顶部的"🤖 自动翻译全部"按钮
- 系统会自动为所有课程生成英文翻译
- 检查并手动修改不准确的翻译

### 步骤 3：保存并下载

1. 点击"💾 保存更新"按钮
2. 系统会自动下载两个文件：
   - `cca-data.js` - CCA 课程数据
   - `elite-programs-translations.json` - 精英项目数据
3. 会弹出详细的替换说明对话框

### 步骤 4：替换文件

1. 找到浏览器下载文件夹中的 `cca-data.js`
2. 将该文件复制到项目目录：
   ```
   harrow-portal/scripts/cca-data.js
   ```
3. 覆盖原有文件

### 步骤 5：验证效果

1. 打开 CCA 规划页面 `cca-planning.html`
2. 使用强制刷新：
   - **Windows**: `Ctrl + Shift + R`
   - **Mac**: `Cmd + Shift + R`
3. 点击右上角的"English"按钮切换到英文
4. 查看课程名称是否已显示英文翻译

## 🔍 技术原理

### 数据流程

```
翻译管理系统 (translation-system.html)
    ↓ 编辑翻译
内存中的数据 (coursesData)
    ↓ 点击"保存更新"
生成新的 cca-data.js 文件
    ↓ 下载到本地
手动替换项目文件
    ↓ 刷新页面
CCA 规划页面 (cca-planning.html)
    ↓ 加载 cca-data.js
显示英文翻译
```

### 语言切换逻辑

在 `scripts/cca.js` 第 273 行：

```javascript
const courseName = i18n.currentLang === 'en' && course.nameEn 
    ? course.nameEn 
    : course.name;
```

- 如果当前语言是英文 (`en`) 且课程有 `nameEn` 字段，显示英文名称
- 否则显示中文名称 `name`

### 数据结构

CCA 课程数据结构：

```javascript
{
    id: 'mon-1',
    name: '滑板',              // 中文名称
    nameEn: 'Skateboarding',  // 英文名称（需要翻译）
    teacher: '那山水',
    grades: ['G1','G2',...],
    fee: '¥1,000',
    category: 'skill'
}
```

## 🎨 自动翻译功能

### 支持的翻译类型

翻译系统内置了 100+ 词汇映射，支持：

- **体育类**：足球、篮球、游泳、羽毛球、高尔夫、网球等
- **音乐类**：钢琴、小提琴、吉他、架子鼓、声乐等
- **学术类**：编程、国际象棋、围棋、科学挑战等
- **艺术类**：多元艺术、书法、折纸、绘画等
- **语言类**：英语、雅思、剑桥英语等

### 翻译规则

1. **关键词匹配**：识别课程名称中的关键词
2. **年级段处理**：
   - `小学部` → `(Primary)`
   - `中学部` → `(Upper)`
   - `高中部` → `(Senior)`
3. **特殊标记**：
   - `(体验)` → `(Trial)`
   - `(G1-5)` → 保持原样
4. **组合翻译**：多个关键词组合成完整翻译

## 📊 翻译进度追踪

翻译系统会实时显示：

- **总课程数**：所有 CCA 课程和精英项目的总数
- **已翻译**：已填写 `nameEn` 的课程数量
- **待翻译**：未填写 `nameEn` 的课程数量
- **完成率**：已翻译 / 总课程数 × 100%

## 🔧 常见问题

### Q1: 为什么翻译后页面还是中文？

**原因**：
- 没有替换 `cca-data.js` 文件
- 浏览器缓存了旧文件

**解决方案**：
1. 确认已替换文件到正确位置
2. 使用强制刷新 (Ctrl+Shift+R / Cmd+Shift+R)
3. 清除浏览器缓存

### Q2: 如何验证文件是否替换成功？

**方法 1**：检查文件修改时间
- 查看 `scripts/cca-data.js` 的修改时间
- 应该是刚才下载的时间

**方法 2**：打开文件查看
- 用文本编辑器打开 `scripts/cca-data.js`
- 搜索某个课程的 `nameEn` 字段
- 确认是否有您刚才填写的翻译

### Q3: 自动翻译不准确怎么办？

**解决方案**：
1. 使用自动翻译作为起点
2. 手动检查并修改不准确的翻译
3. 保存并下载更新后的文件

### Q4: 可以只翻译部分课程吗？

**可以**：
- 只翻译需要的课程
- 未翻译的课程会继续显示中文名称
- 系统会自动处理混合显示

### Q5: 精英项目的翻译在哪里？

**当前状态**：
- 精英项目翻译功能标记为"开发中"
- 精英项目数据会导出为 `elite-programs-translations.json`
- 暂时需要手动处理精英项目翻译

## 📁 相关文件

### 核心文件

```
harrow-portal/
├── translation-system.html          # 翻译管理系统
├── admin.html                       # 管理后台入口
├── cca-planning.html               # CCA 规划页面
└── scripts/
    ├── cca-data.js                 # CCA 课程数据（需要替换）
    ├── cca.js                      # CCA 页面逻辑
    └── i18n.js                     # 国际化配置
```

### 下载的文件

```
Downloads/
├── cca-data.js                     # 更新后的 CCA 数据
└── elite-programs-translations.json # 精英项目翻译
```

## 🚀 最佳实践

### 翻译工作流

1. **批量自动翻译**
   - 点击"自动翻译全部"
   - 快速生成所有翻译

2. **分类检查**
   - 使用过滤器按类型检查
   - 周一、周二、周三、周四分别检查

3. **重点修改**
   - 修改不准确的翻译
   - 确保专业术语正确

4. **保存备份**
   - 定期保存和导出
   - 保留历史版本

5. **应用更新**
   - 替换数据文件
   - 验证效果

### 翻译原则

- ✅ **准确性**：确保翻译准确无误
- ✅ **一致性**：同类课程使用统一术语
- ✅ **简洁性**：避免过长的翻译
- ✅ **专业性**：使用专业术语
- ✅ **可读性**：英文名称易于理解

## 📞 技术支持

如有问题，请联系开发团队。

---

**创建时间**：2026年1月26日  
**版本**：v1.0.0  
**状态**：✅ 已完成

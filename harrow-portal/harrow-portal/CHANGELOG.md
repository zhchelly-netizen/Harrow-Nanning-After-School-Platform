# 南宁哈罗礼德学校课后平台 - 更新日志

## 2026年1月更新 - 真实数据集成版

### 主要更新内容

#### 1. 简化学生信息录入
- ✅ 移除姓名和学号输入
- ✅ 仅保留年级选择
- ✅ Year Group 改为 Grade (G1-G12)

#### 2. 精英项目时间表更新
根据实际运营时间更新所有精英项目：

**精英体育校队：**
- ⚽ 足球（小学 G1-G5）：周二、周四 16:00-17:00
- ⚽ 足球（中学 G6+）：周一、周二、周四 16:00-18:00
- 🏀 篮球（小学 G1-G5）：周三、周五 16:00-17:30
- 🏀 篮球（中学 G6+）：周二、周四 16:00-17:30
- 🏊 游泳队：周一、周二、周五 16:00-17:30 + 周日定制时间
- 🏸 羽毛球队：周二、周五 16:00-17:30 + 周日定制时间
- ⛳ 高尔夫：定制时间
- 🐴 马术：定制时间
- 🎾 网球：定制时间
- ⛸️ 花样滑冰：定制时间

**哈罗音乐学院：**
- 🎹 钢琴、🎻 小提琴、🎸 吉他、🥁 架子鼓、🎤 声乐等
- 所有乐器均为定制时间一对一培训

**学术支持：**
- 📖 英语强化、🔢 数学辅导、🔬 科学辅导
- 均为定制时间

#### 3. CCA课程真实数据
根据 25-26 S2 学期实际课程列表更新：

**周一课程：**
- 滑板兴趣营（那山水）
- 机器魁地奇/无人机足球（桂荣俱乐部）
- 无主乐队 Free Soul Band（宏音音乐，G6-G12）

**周二课程：**
- 中学部袋鼠数学（Nathan Quain，G5-G8）
- 国际科学知识挑战训练营（Amy Luo，G6-G12）
- 英语畅读俱乐部（Jenny Tang，G9-G12）
- 高中物理支持（Godwine Okochi，G9-G12）
- 剑桥英语考级训练营（Germano/Nathanael）
- 3D建模与设计（Mohamed S. Kisten，G6-G12）
- 中国毛笔书法艺术（Chloe Huang，G1-G5）
- 小学部学生企业家俱乐部（Lining/Joyce，G3-G5）

**周三课程：**
- STEP数学考试支持（Robert Adeoba，G9-G12，邀请制）
- "以言论道"思辨社（Kasey/Lily/Nicky，G4-G12，选拔制）
- 国际化学知识竞赛（Sohaib Qureshi，G7-G12）
- 哈罗最强大脑：进阶数学 G3-G6（纬世数学）
- 哈罗最强大脑：进阶数学 G7-G10（纬世数学）
- LAMDA公共演讲中学部（纬世团队，G6-G8）
- 世界学者杯/模拟联合国（Angel/Chelsea，G4-G12）
- 剑桥英语考级训练营
- 墙绘艺术（Colin Hulshof，G3-G5，邀请制）
- CASHFLOW财商启蒙（Sherry Liang，G6-G12）
- 畅读俱乐部（Wenny Song，G1-G4）
- 飞盘社（那山水）

**周四课程：**
- 小学部袋鼠数学（Connie/Vivian，G1-G4）
- 进阶数学支持 Fast Track（Steven McGowan，G9-G12）
- 平面与时尚设计（品象工艺）
- 非遗文化体验与传承（Jada Zhang，G1-G5）
- 哈罗定格动画社（Daria Caraus，G6-G12）
- 小小摄影家俱乐部（Matthew Law，G3-G5）

**周五课程：**
- LAMDA公共演讲小学部（纬世团队，G1-G5）

#### 4. 智能功能增强

**年级过滤：**
- 自动根据选择的年级过滤可选课程
- 不符合年级要求的课程自动隐藏

**时间冲突检测：**
- 实时检测精英项目之间的时间冲突
- 显示冲突警告提示
- 被精英项目占用的CCA时段自动标记为不可选

**邀请制标识：**
- 邀请制课程显示特殊标识
- 点击邀请制课程时提示联系老师

**费用显示：**
- ¥0 课程不显示费用
- 付费课程显示具体金额或"定制课包"

#### 5. 课程表图片生成

**完整周课表：**
- 生成周一至周日完整课程安排
- 包含所有精英项目和CCA课程
- 精英项目显示具体时间
- 定制时间项目在周末显示
- 美观的渐变背景和装饰元素

**图片信息：**
- 学校名称（中英文）
- 学生年级
- 完整周课程安排
- 图例说明（🏆 精英项目 / 📚 CCA课程）
- 生成时间戳
- 学校格言

**下载功能：**
- 自动下载为PNG格式
- 文件名包含年级和时间戳
- 高清分辨率（1400x1800px）

#### 6. 字体优化
- 中文：黑体（SimHei）
- 西文/数字：Arial
- 确保在所有平台上的一致显示

#### 7. Emoji图标
所有精英项目添加了对应的Emoji图标：
- ⚽ 足球
- 🏀 篮球
- 🏊 游泳
- 🏸 羽毛球
- ⛳ 高尔夫
- 🐴 马术
- 🎾 网球
- ⛸️ 花样滑冰
- 🎹 钢琴
- 🎻 小提琴
- 🎸 吉他
- 🥁 架子鼓
- 🎤 声乐
- 🎼 其他乐器
- 📖 英语强化
- 🔢 数学辅导
- 🔬 科学辅导

### 技术改进

#### 数据配置文件
创建 `cca-data.js` 独立配置文件：
- 便于更新课程数据
- 无需修改核心逻辑代码
- 支持从飞书API动态加载

#### 响应式优化
- 课程卡片自适应布局
- 移动端滚动优化
- 触摸友好的交互设计

### 使用说明

#### 更新CCA课程数据
编辑 `scripts/cca-data.js` 文件中的 `CCA_COURSES` 对象：

```javascript
const CCA_COURSES = {
    monday: [
        { 
            id: 'mon-1', 
            name: '课程名称', 
            teacher: '教师姓名', 
            grades: ['G1','G2','G3'], 
            fee: '¥0', 
            category: 'academic',
            inviteOnly: false  // 是否邀请制
        }
    ]
}
```

#### 更新精英项目时间
编辑 `scripts/cca-data.js` 文件中的 `ELITE_SCHEDULES` 对象：

```javascript
const ELITE_SCHEDULES = {
    'project-id': {
        name: '项目名称',
        days: ['mon', 'tue'],  // 周一至周五
        time: '16:00-17:00',
        weekendTime: '周日 16:00-17:30',  // 可选
        grades: ['G1', 'G2', ...]
    }
}
```

### 后续计划

1. **飞书多维表格集成**
   - 实时从飞书获取课程数据
   - 自动同步课程变更
   - 学生选课数据回写

2. **容量管理**
   - 显示课程剩余名额
   - 满员课程自动禁用
   - 候补名单功能

3. **家长通知**
   - 选课成功邮件通知
   - 微信消息推送
   - 课程变更提醒

4. **数据统计**
   - 课程热度分析
   - 学生参与度统计
   - 导出报表功能

### 文件清单

```
harrow-portal/
├── index.html                    # 主页
├── cca-planning.html             # 课程规划页面（已更新）
├── scholarship.html              # 奖学金申请页面
├── styles/
│   ├── main.css                 # 主样式（已更新字体）
│   ├── cca.css                  # CCA样式（已优化）
│   └── scholarship.css          # 奖学金样式
├── scripts/
│   ├── main.js                  # 通用功能
│   ├── cca.js                   # CCA逻辑（已重构）
│   ├── cca-data.js              # 课程数据配置（新增）
│   └── scholarship.js           # 奖学金逻辑
├── README.md                    # 项目文档
└── start.sh                     # 启动脚本
```

### 测试建议

1. **年级过滤测试**
   - 选择不同年级，验证课程列表是否正确过滤

2. **时间冲突测试**
   - 选择多个有时间冲突的精英项目
   - 验证冲突警告是否正确显示
   - 验证CCA时段是否正确标记为不可选

3. **图片生成测试**
   - 选择不同组合的课程
   - 生成课程表图片
   - 验证所有信息是否正确显示

4. **响应式测试**
   - 在不同设备上测试（手机、平板、电脑）
   - 验证布局是否正常
   - 验证交互是否流畅

---

**更新日期：** 2026年1月19日  
**版本：** v2.0  
**维护者：** 南宁哈罗礼德学校 IT部门

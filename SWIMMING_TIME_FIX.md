# 游泳队时间配置修复

## 修复内容

### 问题描述
游泳一队和游泳预备队的训练时间配置错误，需要根据实际情况更新。

### 修复前的配置

```javascript
'swimming-team': {
    name: '🏊 游泳一队',
    days: ['mon', 'wed', 'thu', 'sat', 'sun'],
    time: '16:00-17:30',  // ❌ 错误：应该是 16:00-18:00
    ...
},
'swimming-reserve': {
    name: '🏊 游泳预备队',
    days: ['mon', 'wed', 'sat', 'sun'],
    time: '16:00-18:00',  // ❌ 错误：应该是 16:00-17:30
    ...
}
```

### 修复后的配置

```javascript
'swimming-team': {
    name: '🏊 游泳一队',
    days: ['mon', 'wed', 'thu', 'sat', 'sun'],
    time: '16:00-18:00',  // ✅ 正确：2小时训练
    grades: ['G1', 'G2', 'G3', 'G4', 'G5', 'G6', 'G7', 'G8', 'G9', 'G10', 'G11', 'G12'],
    blocksWeekdays: true
},
'swimming-reserve': {
    name: '🏊 游泳预备队',
    days: ['mon', 'wed', 'sat', 'sun'],
    time: '16:00-17:30',  // ✅ 正确：1.5小时训练
    grades: ['G1', 'G2', 'G3', 'G4', 'G5', 'G6', 'G7', 'G8', 'G9', 'G10', 'G11', 'G12'],
    blocksWeekdays: true
}
```

---

## 前端显示效果

### 游泳一队

**精英项目选择页面：**
```
🏊 游泳一队
周一、周三、周四、周六、周日 16:00-18:00 | 全年级
```

**我的规划浮动框：**
```
🏆 游泳一队
16:00-18:00
精英
```

**确认页面（Step 4）：**
```
周一 MON
16:00-18:00
🏆 游泳一队
```

**课程表图片：**
```
周一
16:00-18:00
🏆 游泳一队
定制课包
```

---

### 游泳预备队

**精英项目选择页面：**
```
🏊 游泳预备队
周一、周三、周六、周日 16:00-17:30 | 全年级
```

**我的规划浮动框：**
```
🏆 游泳预备队
16:00-17:30
精英
```

**确认页面（Step 4）：**
```
周一 MON
16:00-17:30
🏆 游泳预备队
```

**课程表图片：**
```
周一
16:00-17:30
🏆 游泳预备队
定制课包
```

---

## 训练时间对比

| 队伍 | 训练天数 | 训练时间 | 时长 |
|------|---------|---------|------|
| 游泳一队 | 周一、周三、周四、周六、周日（5天） | 16:00-18:00 | 2小时 |
| 游泳预备队 | 周一、周三、周六、周日（4天） | 16:00-17:30 | 1.5小时 |

**区别：**
- 游泳一队比预备队多训练1天（周四）
- 游泳一队每次训练时间更长（2小时 vs 1.5小时）

---

## 影响的功能

### 1. 精英项目选择页面（Step 2）
- ✅ 显示正确的训练时间
- ✅ 显示正确的训练天数

### 2. 我的规划浮动框
- ✅ 展开后显示正确的时间
- ✅ 缩略图正确标记训练天

### 3. CCA 选择页面（Step 3）
- ✅ 正确检测时间冲突
- ✅ 正确阻止冲突天的 CCA 选择

### 4. 确认页面（Step 4）
- ✅ 显示正确的训练时间
- ✅ 课程表预览显示正确

### 5. 报名指引（Step 5）
- ✅ 下载的课程表图片显示正确时间

---

## 时间冲突检测

### 游泳一队（16:00-18:00）

**与 CCA 课程冲突：**
- 周一、周三、周四的所有 CCA 课程（16:00-17:00）
- 因为游泳训练时间覆盖了 CCA 时段

**不冲突：**
- 周二、周五的 CCA 课程（游泳队这两天不训练）
- 周六、周日没有 CCA 课程

### 游泳预备队（16:00-17:30）

**与 CCA 课程冲突：**
- 周一、周三的所有 CCA 课程（16:00-17:00）
- 因为游泳训练时间覆盖了 CCA 时段

**不冲突：**
- 周二、周四、周五的 CCA 课程（游泳队这些天不训练）
- 周六、周日没有 CCA 课程

---

## 数据来源

所有精英项目的时间配置都存储在 `scripts/cca-data.js` 的 `ELITE_SCHEDULES` 对象中。

**关键字段：**
- `name`: 项目名称（显示在前端）
- `days`: 训练天数数组（['mon', 'wed', 'thu', 'sat', 'sun']）
- `time`: 训练时间（'16:00-18:00'）
- `grades`: 适用年级
- `blocksWeekdays`: 是否占用 CCA 时段（true/false）

**浮动规划框获取时间的逻辑：**
```javascript
const scheduleInfo = ELITE_SCHEDULES[program.value];
const time = scheduleInfo ? scheduleInfo.time : '16:00-17:00';
```

这样确保了浮动规划框显示的时间与 `cca-data.js` 中配置的时间一致。

---

## 测试场景

### 测试 1：游泳一队时间显示

**步骤：**
1. 选择年级 G7
2. 选择精英项目：游泳一队
3. 查看"我的规划"浮动框
4. 展开查看详细信息

**预期结果：**
- ✅ 周一、周三、周四、周六、周日显示 ✓
- ✅ 展开后显示：🏆 游泳一队 16:00-18:00

### 测试 2：游泳预备队时间显示

**步骤：**
1. 选择年级 G5
2. 选择精英项目：游泳预备队
3. 查看"我的规划"浮动框
4. 展开查看详细信息

**预期结果：**
- ✅ 周一、周三、周六、周日显示 ✓
- ✅ 展开后显示：🏆 游泳预备队 16:00-17:30

### 测试 3：时间冲突检测

**步骤：**
1. 选择游泳一队
2. 尝试在周一选择 CCA 课程
3. 查看冲突对话框

**预期结果：**
- ✅ 弹出冲突对话框
- ✅ 显示：游泳一队 16:00-18:00 与 CCA 课程 16:00-17:00 冲突

### 测试 4：课程表图片

**步骤：**
1. 选择游泳一队
2. 完成所有步骤
3. 下载课程表图片

**预期结果：**
- ✅ 图片中显示：游泳一队 16:00-18:00

---

## 相关文件

**修改的文件：**
- `scripts/cca-data.js` - 更新游泳队时间配置

**使用该配置的文件：**
- `scripts/floating-planner.js` - 浮动规划框显示
- `scripts/cca.js` - CCA 选择和冲突检测
- `cca-planning.html` - 精英项目选择页面

---

**修复日期：** 2026年1月22日  
**版本：** v2.8 - 游泳队时间配置修复

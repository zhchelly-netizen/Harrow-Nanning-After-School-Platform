<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‰é’®æ ·å¼æµ‹è¯•</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/cca.css">
    <link rel="stylesheet" href="styles/scholarship.css">
    <link rel="stylesheet" href="styles/admin.css">
    <style>
        body {
            padding: 2rem;
            background: var(--bg-cream);
        }
        .test-section {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
        }
        .test-section h2 {
            color: var(--primary-navy);
            margin-bottom: 1rem;
        }
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        .status {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .status.success {
            background: #10b981;
            color: white;
        }
        .status.error {
            background: #dc2626;
            color: white;
        }
    </style>
</head>
<body>
    <div class="test-section">
        <h2>ğŸ”˜ æŒ‰é’®åœ†è§’æµ‹è¯•</h2>
        <p>æ‰€æœ‰æŒ‰é’®åº”è¯¥å‘ˆç°å®Œå…¨åœ†è§’çš„"è¯ä¸¸"å½¢çŠ¶ï¼ˆborder-radius: 50pxï¼‰</p>
        
        <h3 style="margin-top: 2rem;">ä¸»é¡µæŒ‰é’®</h3>
        <div class="button-grid">
            <button class="primary-button"><span>ä¸»è¦æŒ‰é’®</span></button>
            <button class="secondary-button">æ¬¡è¦æŒ‰é’®</button>
            <button class="card-button"><span>å¡ç‰‡æŒ‰é’® â†’</span></button>
            <button class="back-button"><span>â† è¿”å›æŒ‰é’®</span></button>
        </div>

        <h3 style="margin-top: 2rem;">ç®¡ç†åå°æŒ‰é’®</h3>
        <div class="button-grid">
            <button class="header-button"><span>ğŸ“¥ å¯¼å‡º</span></button>
            <button class="header-button primary"><span>ğŸ’¾ ä¿å­˜æ›´æ”¹</span></button>
            <button class="header-button logout"><span>ğŸšª é€€å‡º</span></button>
            <button class="action-button"><span>â• æ·»åŠ ç¿»è¯‘</span></button>
        </div>

        <h3 style="margin-top: 2rem;">CCAé¡µé¢æŒ‰é’®</h3>
        <div class="button-grid">
            <button class="step-button"><span>ä¸‹ä¸€æ­¥</span></button>
            <button class="step-button secondary"><span>ä¸Šä¸€æ­¥</span></button>
            <button class="confirm-button"><span>ç¡®è®¤å¹¶ç”Ÿæˆè¯¾ç¨‹è¡¨</span></button>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸŒ è¯­è¨€åˆ‡æ¢æµ‹è¯•</h2>
        <div id="language-status" class="status success">âœ… è¯­è¨€ç³»ç»Ÿå·²åŠ è½½</div>
        <p>å½“å‰è¯­è¨€: <strong id="current-lang">åŠ è½½ä¸­...</strong></p>
        <p>ç‚¹å‡»å³ä¸Šè§’çš„è¯­è¨€åˆ‡æ¢æŒ‰é’®æµ‹è¯•åˆ‡æ¢åŠŸèƒ½</p>
        
        <div style="margin-top: 1rem;">
            <h3>æµ‹è¯•æ–‡æœ¬ï¼š</h3>
            <p data-i18n="heroTitle" style="font-size: 1.5rem; color: var(--primary-navy);"></p>
            <p data-i18n="platformSubtitle" style="color: var(--text-secondary);"></p>
        </div>

        <div style="margin-top: 1rem;">
            <button class="primary-button" onclick="testLanguageSwitch()">
                <span>æ‰‹åŠ¨è§¦å‘è¯­è¨€åˆ‡æ¢</span>
            </button>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ ç®¡ç†åå°æµ‹è¯•</h2>
        <div id="admin-status" class="status success">æ£€æŸ¥ä¸­...</div>
        <p>ç¿»è¯‘æ•°æ®åŠ è½½çŠ¶æ€: <strong id="translations-status">æ£€æŸ¥ä¸­...</strong></p>
        <p>ç¿»è¯‘é”®æ€»æ•°: <strong id="keys-count">0</strong></p>
        <p>ä¸­æ–‡ç¿»è¯‘æ•°: <strong id="zh-count">0</strong></p>
        <p>è‹±æ–‡ç¿»è¯‘æ•°: <strong id="en-count">0</strong></p>
        
        <div style="margin-top: 1rem;">
            <a href="admin.html" class="primary-button" style="display: inline-block; text-decoration: none;">
                <span>æ‰“å¼€ç®¡ç†åå°</span>
            </a>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ“‹ æµ‹è¯•ç»“æœæ€»ç»“</h2>
        <div id="test-results">
            <p>æ­£åœ¨è¿è¡Œæµ‹è¯•...</p>
        </div>
    </div>

    <!-- è¯­è¨€åˆ‡æ¢æŒ‰é’® -->
    <button class="language-toggle" id="language-toggle" onclick="i18n.switchLanguage()">
        ä¸­æ–‡/English
    </button>

    <script src="scripts/i18n.js"></script>
    <script>
        // æµ‹è¯•è¯­è¨€åˆ‡æ¢
        function testLanguageSwitch() {
            console.log('æ‰‹åŠ¨è§¦å‘è¯­è¨€åˆ‡æ¢');
            i18n.switchLanguage();
        }

        // ç›‘å¬è¯­è¨€åˆ‡æ¢äº‹ä»¶
        document.addEventListener('languageChanged', function(e) {
            console.log('è¯­è¨€åˆ‡æ¢äº‹ä»¶è§¦å‘:', e.detail);
            updateLanguageStatus();
        });

        // æ›´æ–°è¯­è¨€çŠ¶æ€
        function updateLanguageStatus() {
            const currentLang = i18n.getCurrentLanguage();
            document.getElementById('current-lang').textContent = currentLang === 'zh' ? 'ä¸­æ–‡' : 'English';
        }

        // æ£€æŸ¥ç¿»è¯‘æ•°æ®
        function checkTranslations() {
            if (typeof i18n !== 'undefined' && i18n.translations) {
                const zhKeys = Object.keys(i18n.translations.zh || {});
                const enKeys = Object.keys(i18n.translations.en || {});
                
                document.getElementById('translations-status').textContent = 'âœ… å·²åŠ è½½';
                document.getElementById('keys-count').textContent = zhKeys.length;
                document.getElementById('zh-count').textContent = zhKeys.length;
                document.getElementById('en-count').textContent = enKeys.length;
                
                document.getElementById('admin-status').className = 'status success';
                document.getElementById('admin-status').textContent = 'âœ… ç¿»è¯‘ç³»ç»Ÿæ­£å¸¸';
                
                return true;
            } else {
                document.getElementById('translations-status').textContent = 'âŒ æœªåŠ è½½';
                document.getElementById('admin-status').className = 'status error';
                document.getElementById('admin-status').textContent = 'âŒ ç¿»è¯‘ç³»ç»Ÿå¼‚å¸¸';
                return false;
            }
        }

        // è¿è¡Œæ‰€æœ‰æµ‹è¯•
        function runTests() {
            const results = [];
            
            // æµ‹è¯•1: æ£€æŸ¥æŒ‰é’®åœ†è§’
            const buttons = document.querySelectorAll('button');
            let allButtonsRounded = true;
            buttons.forEach(btn => {
                const style = window.getComputedStyle(btn);
                const borderRadius = style.borderRadius;
                if (!borderRadius.includes('50px')) {
                    allButtonsRounded = false;
                }
            });
            results.push({
                name: 'æŒ‰é’®åœ†è§’',
                passed: allButtonsRounded,
                message: allButtonsRounded ? 'æ‰€æœ‰æŒ‰é’®éƒ½æ˜¯åœ†è§’' : 'éƒ¨åˆ†æŒ‰é’®ä¸æ˜¯åœ†è§’'
            });

            // æµ‹è¯•2: æ£€æŸ¥è¯­è¨€ç³»ç»Ÿ
            const i18nLoaded = typeof i18n !== 'undefined';
            results.push({
                name: 'è¯­è¨€ç³»ç»ŸåŠ è½½',
                passed: i18nLoaded,
                message: i18nLoaded ? 'i18n ç³»ç»Ÿå·²åŠ è½½' : 'i18n ç³»ç»ŸæœªåŠ è½½'
            });

            // æµ‹è¯•3: æ£€æŸ¥ç¿»è¯‘æ•°æ®
            const translationsLoaded = checkTranslations();
            results.push({
                name: 'ç¿»è¯‘æ•°æ®',
                passed: translationsLoaded,
                message: translationsLoaded ? 'ç¿»è¯‘æ•°æ®å·²åŠ è½½' : 'ç¿»è¯‘æ•°æ®æœªåŠ è½½'
            });

            // æµ‹è¯•4: æ£€æŸ¥è¯­è¨€åˆ‡æ¢æŒ‰é’®
            const langBtn = document.getElementById('language-toggle');
            const langBtnExists = langBtn !== null;
            results.push({
                name: 'è¯­è¨€åˆ‡æ¢æŒ‰é’®',
                passed: langBtnExists,
                message: langBtnExists ? 'è¯­è¨€åˆ‡æ¢æŒ‰é’®å­˜åœ¨' : 'è¯­è¨€åˆ‡æ¢æŒ‰é’®ä¸å­˜åœ¨'
            });

            // æ˜¾ç¤ºç»“æœ
            const resultsDiv = document.getElementById('test-results');
            let html = '<h3>æµ‹è¯•ç»“æœï¼š</h3><ul style="list-style: none; padding: 0;">';
            
            results.forEach(result => {
                const icon = result.passed ? 'âœ…' : 'âŒ';
                const color = result.passed ? '#10b981' : '#dc2626';
                html += `<li style="padding: 0.5rem; margin: 0.5rem 0; background: ${result.passed ? '#f0fdf4' : '#fef2f2'}; border-left: 4px solid ${color}; border-radius: 8px;">
                    ${icon} <strong>${result.name}:</strong> ${result.message}
                </li>`;
            });
            
            html += '</ul>';
            
            const passedCount = results.filter(r => r.passed).length;
            const totalCount = results.length;
            const allPassed = passedCount === totalCount;
            
            html += `<div class="status ${allPassed ? 'success' : 'error'}" style="margin-top: 1rem;">
                ${allPassed ? 'âœ…' : 'âš ï¸'} é€šè¿‡ ${passedCount}/${totalCount} é¡¹æµ‹è¯•
            </div>`;
            
            resultsDiv.innerHTML = html;
        }

        // é¡µé¢åŠ è½½å®Œæˆåè¿è¡Œæµ‹è¯•
        window.addEventListener('load', function() {
            setTimeout(() => {
                updateLanguageStatus();
                runTests();
            }, 500);
        });
    </script>
</body>
</html>

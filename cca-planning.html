<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课后课程规划 | 南宁哈罗礼德学校</title>
    <link rel="stylesheet" href="styles/main.css?v=20260130">
    <link rel="stylesheet" href="styles/cca.css?v=20260131k">
    <link rel="stylesheet" href="styles/floating-planner.css?v=20260131o">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600;700&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="sub-header">
            <div class="sub-header-top">
            <button class="back-button" onclick="window.location.href='index.html'">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 12H5M12 19l-7-7 7-7"/>
                </svg>
                <span data-i18n="back">返回主页</span>
            </button>
                <img src="images/harrow-logo-small-white.png" alt="Harrow Logo" class="sub-header-logo">
            </div>
            <h1 class="page-title" data-i18n="pageTitle">课后课程规划</h1>
        </header>

        <!-- Progress Indicator -->
        <div class="progress-container">
            <div class="progress-step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label" data-i18n="step1">学生信息</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label" data-i18n="step2">精英项目</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label" data-i18n="step3">CCA课程</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label" data-i18n="step4">确认规划</div>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label" data-i18n="step5">报名指引</div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="cca-content">
            <!-- Step 1: Student Info -->
            <section class="step-section active" id="step-1">
                <h2 class="section-title" data-i18n="selectGradeTitle">选择年级</h2>
                <div class="form-container">
                    <div class="form-group">
                        <label for="student-grade" data-i18n="grade">年级</label>
                        <select id="student-grade">
                            <option value="" data-i18n="selectGrade">请选择年级</option>
                            <option value="G1" data-i18n="gradeG1">一年级</option>
                            <option value="G2" data-i18n="gradeG2">二年级</option>
                            <option value="G3" data-i18n="gradeG3">三年级</option>
                            <option value="G4" data-i18n="gradeG4">四年级</option>
                            <option value="G5" data-i18n="gradeG5">五年级</option>
                            <option value="G6" data-i18n="gradeG6">六年级</option>
                            <option value="G7" data-i18n="gradeG7">七年级</option>
                            <option value="G8" data-i18n="gradeG8">八年级</option>
                            <option value="G9" data-i18n="gradeG9">九年级</option>
                            <option value="G10" data-i18n="gradeG10">十年级</option>
                            <option value="G11" data-i18n="gradeG11">十一年级</option>
                            <option value="G12" data-i18n="gradeG12">十二年级</option>
                        </select>
                    </div>
                    <button class="primary-button" onclick="nextStep(2)"><span data-i18n="nextStep">下一步 →</span></button>
                </div>
            </section>

            <!-- Step 2: Elite Programs -->
            <section class="step-section" id="step-2">
                <h2 class="section-title" data-i18n="eliteProgramsSelection">精英项目选择</h2>
                <p class="section-description" data-i18n="eliteProgramsSelectionDesc">选择您希望加入的精英培养项目（可多选）</p>
                
                <div class="elite-programs-grid">
                    <!-- Elite Sports -->
                    <div class="elite-card" data-category="sports">
                        <div class="elite-header">
                            <div class="elite-icon sports-icon">⚽</div>
                            <div>
                                <h3 data-i18n="eliteSports">精英体育校队</h3>
                            </div>
                        </div>
                        <div class="elite-options">
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="football-primary" data-schedule="tue,thu" data-grades="G1,G2,G3,G4,G5">
                                <span class="checkbox-content">
                                    <strong>⚽ 足球（小学）</strong>
                                    <small>周二、周四 16:00-17:00 | G1-G5</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="football-secondary" data-schedule="mon,tue,thu" data-grades="G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>⚽ 足球（中学）</strong>
                                    <small>周一、周二、周四 16:00-18:00 | G6+</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="basketball-primary" data-schedule="wed, fri" data-grades="G1,G2,G3,G4,G5">
                                <span class="checkbox-content">
                                    <strong>🏀 篮球（小学）</strong>
                                    <small>周三、周五 16:00-17:30 | G1-G5</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="basketball-secondary" data-schedule="tue,thu" data-grades="G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🏀 篮球（中学）</strong>
                                    <small>周二、周四 16:00-17:30 | G6+</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="swimming-team" data-schedule="mon,wed,thu,sat,sun" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🏊 游泳一队</strong>
                                    <small>周一、周三、周四、周六、周日 16:00-18:00 | 全年级</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="swimming-reserve" data-schedule="mon,wed,sat,sun" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🏊 游泳预备队</strong>
                                    <small>周一、周三、周六、周日 16:00-17:30 | 全年级</small>
                                </span>    
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="badminton" data-schedule="tue, fri, sun" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🏸 羽毛球队</strong>
                                    <small>周二、周五、周日 16:00-17:30 | 全年级</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="golf" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>⛳ 高尔夫</strong>
                                    <small>定制时间 | 全年级</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="equestrian" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🐴 马术</strong>
                                    <small>定制时间 | 全年级</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="tennis" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎾 网球</strong>
                                    <small>定制时间 | 全年级</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="elite-sports" value="skating" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>⛸️ 花样滑冰</strong>
                                    <small>定制时间 | 全年级</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- Music Academy -->
                    <div class="elite-card" data-category="music">
                        <div class="elite-header">
                            <div class="elite-icon music-icon">🎵</div>
                            <div>
                                <h3 data-i18n="musicAcademy">哈罗音乐学院</h3>
                            </div>
                        </div>
                        <div class="elite-options">
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="piano" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎹 钢琴</strong>
                                    <small>定制时间 | 一对一专业培训</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="violin" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎻 小提琴</strong>
                                    <small>定制时间 | 一对一专业培训</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="guitar" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎸 吉他</strong>
                                    <small>定制时间 | 一对一专业培训</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="drums" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🥁 架子鼓</strong>
                                    <small>定制时间 | 一对一专业培训</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="vocal" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎤 声乐</strong>
                                    <small>定制时间 | 一对一专业培训</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="other-instrument" data-schedule="custom" data-grades="G1,G2,G3,G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎼 其他乐器</strong>
                                    <small>定制时间 | 请在备注中说明</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- Music Academy - Band -->
                    <div class="elite-card" data-category="music">
                        <div class="elite-header">
                            <div class="elite-icon music-icon">🎸</div>
                            <div>
                                <h3 data-i18n="band">无主乐队</h3>
                            </div>
                        </div>
                        <div class="elite-options">
                            <label class="checkbox-card">
                                <input type="checkbox" name="music" value="band" data-schedule="mon" data-grades="G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🎸 无主乐队</strong>
                                    <small>周一 16:00-17:00 | G6+ | 需选拔/试课</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- Academic Competitions -->
                    <div class="elite-card" data-category="academic">
                        <div class="elite-header">
                            <div class="elite-icon academic-icon">🎓</div>
                            <div>
                                <h3 data-i18n="academicCompetition">学术竞赛队伍</h3>
                            </div>
                        </div>
                        <div class="elite-options">
                            <label class="checkbox-card">
                                <input type="checkbox" name="academic" value="debate" data-schedule="wed" data-grades="G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>🗣️ "以言论道"思辨社</strong>
                                    <small>周三 16:00-17:00 | G4+ | 需选拔</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- The HUB -->
                    <div class="elite-card" data-category="hub">
                        <div class="elite-header">
                            <div class="elite-icon hub-icon">📖</div>
                            <div>
                                <h3 data-i18n="hubCentre">宏博中心</h3>
                            </div>
                        </div>
                        <div class="elite-options">
                            <label class="checkbox-card">
                                <input type="checkbox" name="hub" value="english-foundation" data-schedule="custom" data-grades="G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>📖 英语基础</strong>
                                    <small>定制时间 | G4+ | 预约制</small>
                                </span>
                            </label>
                            <label class="checkbox-card">
                                <input type="checkbox" name="hub" value="ielts-advanced" data-schedule="tue,thu" data-grades="G4,G5,G6,G7,G8,G9,G10,G11,G12">
                                <span class="checkbox-content">
                                    <strong>📝 雅思进阶</strong>
                                    <small>周二、周四 | G4+ | 预约制</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- Math Support -->
                    <div class="elite-card" data-category="math">
                        <div class="elite-header">
                            <div class="elite-icon math-icon">🔢</div>
                            <div>
                                <h3 data-i18n="mathSupportTitle">英文数学</h3>
                            </div>
                        </div>
                        <div class="elite-options">
                            <label class="checkbox-card">
                                <input type="checkbox" name="math" value="math-support" data-schedule="custom" data-grades="G3,G5,G5,G6">
                                <span class="checkbox-content">
                                    <strong>🔢 英文数学支持</strong>
                                    <small>定制时间 16:00-18:00 & 18:00-20:00 | G3-G6</small>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="secondary-button" onclick="prevStep(1)"><span data-i18n="prevStep">← 上一步</span></button>
                    <button class="primary-button" onclick="nextStep(3)"><span data-i18n="nextStep">下一步 →</span></button>
                </div>
            </section>

            <!-- Step 3: CCA Selection -->
            <section class="step-section" id="step-3">
                <h2 class="section-title" data-i18n="ccaCoursesSelection">CCA 课程选择</h2>
                <p class="section-description" data-i18n="ccaCoursesSelectionDesc">选择周一至周四 16:00-17:00 的课后联课活动</p>
                
                <div class="schedule-notice">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    <p data-i18n="autoDetectConflict">系统将自动检测与精英项目的时间冲突，仅显示可选时段</p>
                </div>

                <div class="selection-notice">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    <p data-i18n="selectForEachDay">请为每一天选择一门课程，或选择"不参加"</p>
                </div>

                <div class="weekly-schedule">
                    <div class="day-column" data-day="monday">
                        <h3 class="day-header" data-i18n="monday">周一</h3>
                        <div class="cca-slots" id="monday-slots">
                            <div class="loading-placeholder" data-i18n="loadingCourses">加载课程中...</div>
                        </div>
                    </div>
                    <div class="day-column" data-day="tuesday">
                        <h3 class="day-header" data-i18n="tuesday">周二</h3>
                        <div class="cca-slots" id="tuesday-slots">
                            <div class="loading-placeholder" data-i18n="loadingCourses">加载课程中...</div>
                        </div>
                    </div>
                    <div class="day-column" data-day="wednesday">
                        <h3 class="day-header" data-i18n="wednesday">周三</h3>
                        <div class="cca-slots" id="wednesday-slots">
                            <div class="loading-placeholder" data-i18n="loadingCourses">加载课程中...</div>
                        </div>
                    </div>
                    <div class="day-column" data-day="thursday">
                        <h3 class="day-header" data-i18n="thursday">周四</h3>
                        <div class="cca-slots" id="thursday-slots">
                            <div class="loading-placeholder" data-i18n="loadingCourses">加载课程中...</div>
                        </div>
                    </div>
                    <div class="day-column" data-day="friday">
                        <h3 class="day-header" data-i18n="friday">周五</h3>
                        <div class="cca-slots" id="friday-slots">
                            <div class="loading-placeholder" data-i18n="loadingCourses">加载课程中...</div>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="secondary-button" onclick="prevStep(2)"><span data-i18n="prevStep">← 上一步</span></button>
                    <button class="primary-button" onclick="nextStep(4)"><span data-i18n="nextStep">下一步 →</span></button>
                </div>
            </section>

            <!-- Step 4: Confirmation -->
            <section class="step-section" id="step-4">
                <h2 class="section-title" data-i18n="confirmPlan">确认规划</h2>
                <p class="section-description" data-i18n="confirmPlanDesc">请确认您的课程选择</p>
                
                <div class="summary-container" id="selection-summary">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="schedule-preview" id="schedule-preview">
                    <h3 data-i18n="yourWeeklySchedule">您的一周课后安排</h3>
                    <div class="preview-grid">
                        <!-- Will be generated by JavaScript -->
                    </div>
                </div>
                
                <!-- Price Summary -->
                <div class="price-summary" id="price-summary">
                    <h3 data-i18n="feeDetails">费用明细</h3>
                    <div class="price-details">
                        <!-- Will be generated by JavaScript -->
                    </div>
                </div>

                <div class="button-group">
                    <button class="secondary-button" onclick="prevStep(3)"><span data-i18n="prevStep">← 上一步</span></button>
                    <button class="primary-button success-button" onclick="nextStep(5)"><span data-i18n="nextStepGuide">下一步：生成报名指引 →</span></button>
                </div>
            </section>

            <!-- Step 5: Registration Guide -->
            <section class="step-section" id="step-5">
                <h2 class="section-title" data-i18n="registrationGuideTitle">报名指引</h2>
                <p class="section-description" data-i18n="registrationGuideDesc">根据您的选择，以下是您需要完成的报名步骤</p>
                
                <div class="registration-steps-preview" id="registration-steps-preview">
                    <!-- Will be populated by JavaScript -->
                </div>

                <div class="button-group">
                    <button class="secondary-button" onclick="prevStep(4)"><span data-i18n="prevStep">← 上一步</span></button>
                    <button class="primary-button success-button" onclick="generateScheduleImage()"><span data-i18n="downloadScheduleAndTodo">下载课程表与待办 📸</span></button>
                </div>
            </section>
        </main>
    </div>

    <!-- Canvas for image generation -->
    <canvas id="schedule-canvas"></canvas>

    <script src="scripts/i18n.js?v=20260131c"></script>
    <script src="scripts/cca-data.js?v=20260131g"></script>
    <script src="scripts/main.js?v=20260130h"></script>
    <script src="scripts/floating-planner.js?v=20260131p"></script>
    <script src="scripts/cca.js?v=20260131f"></script>
    <script>
        // 语言检查 - 如果没有选择语言，跳转到语言选择页面
        (function() {
            const selectedLang = sessionStorage.getItem('selectedLanguage');
            if (!selectedLang) {
                window.location.href = 'language-selection.html';
                return;
            }
            
            // 设置html的lang属性
            document.documentElement.lang = selectedLang === 'zh' ? 'zh-CN' : 'en';
            
            // 设置语言
            if (typeof i18n !== 'undefined') {
                i18n.setLanguage(selectedLang);
                // 立即更新页面语言
                i18n.updatePageLanguage();
            }
        })();
    </script>
</body>
</html>
